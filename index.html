<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recomendador de Carros Portugal</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-car"></i> Recomendador de Carros Portugal</h1>
            <p class="subtitle">Compare modelos ou encontre o carro perfeito para si</p>
        </header>
        
        <div class="mode-selector">
            <button class="mode-btn active" data-mode="comparar" onclick="switchMode('comparar')">
                <i class="fas fa-exchange-alt"></i> Comparar Modelos
            </button>
            <button class="mode-btn" data-mode="encontrar" onclick="switchMode('encontrar')">
                <i class="fas fa-search"></i> Encontrar Carro para Mim
            </button>
        </div>
        
        <!-- Modo Comparar -->
        <div id="compararMode" class="mode-content active">
            <h2><i class="fas fa-exchange-alt"></i> Comparar Modelos</h2>
            <p>Selecione 2 ou 3 modelos para comparar características detalhadas.</p>
            
            <form id="compararForm" onsubmit="handleComparar(event)">
                <div class="form-group">
                    <label for="modelo1">Modelo 1 *</label>
                    <input type="text" id="modelo1" placeholder="Ex: Volkswagen Golf 2023" required 
                           list="modelosList1">
                    <datalist id="modelosList1"></datalist>
                </div>
                
                <div class="form-group">
                    <label for="modelo2">Modelo 2 *</label>
                    <input type="text" id="modelo2" placeholder="Ex: Peugeot 208 2023" required
                           list="modelosList2">
                    <datalist id="modelosList2"></datalist>
                </div>
                
                <div class="form-group">
                    <label for="modelo3">Modelo 3 (opcional)</label>
                    <input type="text" id="modelo3" placeholder="Ex: Renault Clio 2023"
                           list="modelosList3">
                    <datalist id="modelosList3"></datalist>
                </div>
                
                <button type="submit" class="btn">
                    <i class="fas fa-balance-scale"></i> Comparar Modelos
                </button>
                <button type="button" class="btn btn-secondary" onclick="limparComparar()">
                    <i class="fas fa-redo"></i> Limpar
                </button>
            </form>
            
            <div class="loading" id="loadingComparar">
                <div class="spinner"></div>
                <p>A comparar modelos...</p>
            </div>
            
            <div id="compararResults" class="results"></div>
        </div>
        
        <!-- Modo Encontrar -->
        <div id="encontrarMode" class="mode-content">
            <h2><i class="fas fa-search"></i> Encontrar Carro para Mim</h2>
            <p>Use os filtros abaixo para encontrar carros que correspondam às suas necessidades.</p>
            
            <form id="encontrarForm" onsubmit="handleEncontrar(event)">
                <!-- Filtros Básicos -->
                <div class="form-group">
                    <label for="precoMax">Preço Máximo (€)</label>
                    <input type="number" id="precoMax" placeholder="Ex: 30000" min="0" step="1000">
                </div>
                
                <div class="form-group">
                    <label>Tipos de Carro</label>
                    <div id="tiposContainer" class="checkbox-group">
                        <!-- Preenchido por JavaScript -->
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Combustível</label>
                    <div id="combustiveisContainer" class="checkbox-group">
                        <!-- Preenchido por JavaScript -->
                    </div>
                </div>
                
                <!-- Filtros Técnicos -->
                <div class="form-group">
                    <label for="bagageiraMin">Bagageira Mínima (litros)</label>
                    <input type="number" id="bagageiraMin" placeholder="Ex: 300" min="0" step="10">
                </div>
                
                <div class="form-group">
                    <label for="consumoMax">Consumo Máximo (l/100km)</label>
                    <input type="number" id="consumoMax" placeholder="Ex: 6.0" min="0" step="0.1">
                </div>
                
                <!-- Extras -->
                <div class="form-group">
                    <label>Extras</label>
                    <div id="extrasContainer" class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="airbag" value="Airbag">
                            <label for="airbag">Airbag</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="ac" value="AC">
                            <label for="ac">Ar Condicionado</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="cc" value="CC">
                            <label for="cc">Cruise Control</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="sensores" value="Sensores">
                            <label for="sensores">Sensores</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="teto" value="Teto Solar">
                            <label for="teto">Teto Solar</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="navegador" value="Navegador">
                            <label for="navegador">Navegador</label>
                        </div>
                    </div>
                </div>
                
                <!-- Perfil -->
                <div class="form-group">
                    <label for="perfil">Perfil de Utilização</label>
                    <select id="perfil" onchange="togglePrioridades()">
                        <option value="equilibrado">Equilibrado</option>
                        <option value="familia">Família</option>
                        <option value="cidade">Cidade</option>
                        <option value="estrada">Estrada</option>
                        <option value="economico">Económico</option>
                        <option value="desportivo">Desportivo</option>
                        <option value="personalizado">Personalizado</option>
                    </select>
                </div>
                
                <!-- Prioridades Personalizadas -->
                <div class="priority-sliders" id="prioritySliders" style="display: none;">
                    <h3><i class="fas fa-sliders-h"></i> Prioridades Personalizadas</h3>
                    
                    <div class="form-group">
                        <label for="prioridadeConsumo">Consumo Económico
                            <span class="slider-value" id="consumoValue">1</span>
                        </label>
                        <input type="range" id="prioridadeConsumo" min="0.1" max="3" step="0.1" value="1" 
                               oninput="document.getElementById('consumoValue').textContent = this.value">
                    </div>
                    
                    <div class="form-group">
                        <label for="prioridadeDesempenho">Desempenho
                            <span class="slider-value" id="desempenhoValue">1</span>
                        </label>
                        <input type="range" id="prioridadeDesempenho" min="0.1" max="3" step="0.1" value="1"
                               oninput="document.getElementById('desempenhoValue').textContent = this.value">
                    </div>
                    
                    <div class="form-group">
                        <label for="prioridadeEspaco">Espaço/Conforto
                            <span class="slider-value" id="espacoValue">1</span>
                        </label>
                        <input type="range" id="prioridadeEspaco" min="0.1" max="3" step="0.1" value="1"
                               oninput="document.getElementById('espacoValue').textContent = this.value">
                    </div>
                </div>
                
                <button type="submit" class="btn">
                    <i class="fas fa-search"></i> Encontrar Carros
                </button>
                <button type="button" class="btn btn-secondary" onclick="limparFiltros()">
                    <i class="fas fa-redo"></i> Limpar Filtros
                </button>
            </form>
            
            <div class="loading" id="loadingEncontrar">
                <div class="spinner"></div>
                <p>A procurar carros...</p>
            </div>
            
            <div id="encontrarResults" class="results"></div>
        </div>
        
        <!-- Informações -->
        <div class="info-box">
            <h3><i class="fas fa-info-circle"></i> Como usar</h3>
            <p><strong>Modo Comparar:</strong> Digite o nome completo do modelo (Marca Modelo Ano).</p>
            <p><strong>Modo Encontrar:</strong> Ajuste os filtros conforme suas necessidades.</p>
            <p><strong>API Backend:</strong> Configure a URL da API no ficheiro app.js.</p>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // Configurações
        const API_URL = 'http://localhost:8000'; // ALTERE AQUI para o seu backend
        
        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Página carregada');
            // Configurar autocomplete
            setupAutocomplete('modelo1');
            setupAutocomplete('modelo2');
            setupAutocomplete('modelo3');
            
            // Carregar tipos e combustíveis
            loadInitialData();
        });
    </script>
</body>
</html>